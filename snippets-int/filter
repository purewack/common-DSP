float out;
float in;
float a; //0->4095 = 0 -> fs/2 (12b)

out = out + (a*(in-out) >> 12);